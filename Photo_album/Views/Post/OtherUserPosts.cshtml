@using Photo_album.Helpers
@model Photo_album.ViewModels.PostViewModel

@{
    ViewBag.Title = "Post";
}

<div class="container">
    @if (!Model.PostDTOs.Any())
    {
        <a href="@Url.Action("ProfileInfo", "Manage", new {userKey = Request.QueryString["userKey"] })">This User does not have posts</a>
    }
    @foreach (var item in Model.PostDTOs)
    {
        <div class="text-box border border-3 px-3 py-2 my-2">
            <h2>@item.UserDto.UserName posts:</h2>
            <div>
                <a href="@Url.Action("ProfileInfo", "Manage", new {userKey = item.UserId})"><b>User:</b> @item.UserDto.UserName</a>
            </div>
            <div>
                <p class="border px-3 py-2"> <b>Description:</b> @item.Description</p>
            </div>
            <div>
                <img class="border px-3 py-2" alt="Image" src="@("data:image/png;base64," + item.Image)" />
            </div>
            <div class="px-3 py-2">
                <p>@item.CreationDate.ToString("dd/MM/yyyy HH:mm")</p>
            </div>
            <a href="@Url.Action("FullPost", "Post", new {id = item.Id})">Full post</a>
        </div>
    }

    @if (Model.PostDTOs.Count() > Model.PageInfo.PageSize)
    {
        <div class="btn-group">
            @Html.PageLinks(Model.PageInfo, x => Url.Action("OtherUserPosts", "Post", new { page = x }))
        </div>
    }
</div>